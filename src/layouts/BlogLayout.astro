---
import Layout from "./Layout.astro";
export interface Props {
    title: string;
    description?: string;
    pubDate: string;
    author?: string;
    tags?: string[];
}

const {
    title,
    description,
    pubDate,
    author = "Daniel Madeley",
    tags = [],
} = Astro.props;
---

<Layout title={title}>
    <article data-pagefind-body>
        <header class="mb-12">
            <h1
                class="text-4xl font-bold text-stone-100 mb-4"
                data-pagefind-meta="title"
            >
                {title}
            </h1>

            {
                description && (
                    <p
                        class="text-xl text-stone-400 mb-6"
                        data-pagefind-meta="description"
                    >
                        {description}
                    </p>
                )
            }

            <div
                class="flex flex-wrap items-center gap-4 text-sm text-stone-500"
            >
                <time datetime={pubDate} data-pagefind-meta="date">
                    {
                        new Date(pubDate).toLocaleDateString("en-US", {
                            year: "numeric",
                            month: "long",
                            day: "numeric",
                        })
                    }
                </time>

                {author && <span data-pagefind-meta="author">By {author}</span>}

                {
                    tags.length > 0 && (
                        <>
                            <div class="hidden" data-pagefind-meta="tags">
                                {tags.join(", ")}
                            </div>
                            <div class="flex gap-2">
                                {tags.map((tag) => (
                                    <span
                                        class="px-2 py-1 bg-stone-800 text-stone-300 rounded-full text-xs"
                                        data-pagefind-filter="tag"
                                    >
                                        {tag}
                                    </span>
                                ))}
                            </div>
                        </>
                    )
                }
            </div>
        </header>

        <div class="prose prose-stone prose-invert max-w-none">
            <slot />
        </div>
    </article>
</Layout>

<style>
    .prose h2 {
        font-size: 1.5rem;
        font-weight: 700;
        color: #f5f5f4;
        margin-top: 2rem;
        margin-bottom: 1rem;
    }

    .prose h3 {
        font-size: 1.25rem;
        font-weight: 600;
        color: #e7e5e4;
        margin-top: 1.5rem;
        margin-bottom: 0.75rem;
    }

    .prose p {
        color: #d6d3d1;
        line-height: 1.625;
        margin-bottom: 1rem;
    }

    .prose ul,
    .prose ol {
        color: #d6d3d1;
        margin-bottom: 1rem;
    }

    .prose li {
        margin-bottom: 0.5rem;
    }

    .prose a {
        color: #f5f5f4;
        transition: color 0.2s ease;
    }

    .prose a:hover {
        color: #d6d3d1;
    }

    .prose code {
        background-color: #292524;
        color: #e7e5e4;
        padding: 0.375rem 0.375rem;
        border-radius: 0.25rem;
        font-size: 0.875rem;
    }

    .prose pre {
        background-color: #292524;
        color: #e7e5e4;
        padding: 1rem;
        border-radius: 0.5rem;
        overflow-x: auto;
    }

    .prose blockquote {
        border-left: 4px solid #57534e;
        padding-left: 1rem;
        font-style: italic;
        color: #a8a29e;
    }
</style>
